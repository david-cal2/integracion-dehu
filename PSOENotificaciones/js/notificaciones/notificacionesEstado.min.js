var $inputIdentificador = $("#inputIdentificador"), $selectAdministracionPublica = $("#selectAdministracionPublica"), $selectOrganismosRaiz = $("#selectOrganismosRaiz"), $selectOrganismosEmisores = $("#selectOrganismosEmisores"), $selectAsuntos = $("#selectAsuntos"), $selectGrupos = $("#selectGrupos"), $selectGruposModal = $("#selectGruposModal");
$(function () {
    function k() { var f = []; f.push(parseInt(idEstado)); return f } (function () {
        var f = $("#item-menu-notificaciones-estado-1"), h = $("#item-menu-notificaciones-estado-2"), g = $("#item-menu-notificaciones-estado-3"), b = $("#item-menu-notificaciones-estado-4"), c = $("#item-menu-notificaciones-estado-5"), d = $("#item-menu-notificaciones-estado-7"); idPerfil == Perfiles.Asignador && (h.addClass("no-visible"), g.addClass("no-visible"), b.addClass("no-visible"), c.addClass("no-visible"), d.addClass("no-visible")); idPerfil ==
            Perfiles.Gestor && f.addClass("display-none"); $(".menu-lateral").removeClass("no-visible")
    })(); $(document).ready(function () {
        function f() {
            idPerfil != Perfiles.Asignador && idPerfil != Perfiles.UsuarioConsulta || $(".btn-comparecer").addClass("display-none"); idPerfil != Perfiles.Gestor && idPerfil != Perfiles.UsuarioConsulta || $(".btn-abrir-modal-asignar-grupo").addClass("display-none"); idPerfil != Perfiles.Gestor && idPerfil != Perfiles.Asignador || $("#div-asignada").addClass("display-none"); idEstado == Estados.SinAsignar &&
                ($("#liSinAsignar").addClass("active_menu"), $(".content_title__menu").addClass("content_title__menu_pendiente")); idEstado == Estados.EnAlerta && ($("#liEnAlerta").addClass("active_menu"), $(".content_title__menu").addClass("content_title__menu_alerta")); idEstado == Estados.Asignadas && ($("#liAsignadas").addClass("active_menu"), $(".content_title__menu").addClass("content_title__menu_asignadas")); idEstado == Estados.Comparecidas && ($("#liComparecidas").addClass("active_menu"), $(".content_title__menu").addClass("content_title__menu_comparecidas"));
            idEstado == Estados.Caducadas && ($("#liCaducadas").addClass("active_menu"), $(".content_title__menu").addClass("content_title__menu_caducadas")); idEstado == Estados.Externas && ($("#liExternas").addClass("active_menu"), $(".content_title__menu").addClass("content_title__menu_externas"))
        } function h() {
            for (var b = "", c = document.querySelectorAll("#gruposAsignados li"), d = 0; li = c[d]; d++)b += li.id + ","; $.ajax({
                async: !1, type: "GET", contentType: "application/json; charset=utf-8", url: "/Notificaciones/AsignarGrupoEnvio", data: {
                    identificador: identificadorAsignar,
                    idGrupos: b
                }, dataType: "json", success: function (a) { "True" == a.Success ? ($(".cadena-" + identificadorAsignar)[0].innerText = a.cadenaGrupos, g(), f()) : ($("#overlay").hide(), toastr.error("Error en la llamada al servicio 'AsignarGrupoEnvio'")) }, error: function (a) { $("#overlay").hide(); toastr.error("Error en la llamada al servicio 'AsignarGrupoEnvio'") }
            })
        } function g(b) {
            var c = "/Notificaciones/GetNotificacionesBuscadorComplejo", d = !1; null == b && (d = !0, c = "/Notificaciones/GetNotificacionesPorEstado", b = {
                idEstados: JSON.stringify(k()),
                primeros: !0
            }); $.ajax({
                async: !1, type: "GET", contentType: "application/json; charset=utf-8", url: c, data: b, dataType: "json", success: function (a) {
                    d && null != a.CantidadesTotales && ($("#cantSinAsignar")[0].innerHTML = a.CantidadesTotales[0].Value, $("#cantEnAlerta")[0].innerHTML = a.CantidadesTotales[1].Value, $("#cantAsignadas")[0].innerHTML = a.CantidadesTotales[2].Value, $("#cantComparecidas")[0].innerHTML = a.CantidadesTotales[3].Value, $("#cantCaducadas")[0].innerHTML = a.CantidadesTotales[4].Value, $("#cantExternas")[0].innerHTML =
                        a.CantidadesTotales[6].Value); var e = $("#div-contenedor"), l = $("#div-contenedor-vacio"); null != a.ListaEnvios && 0 < a.ListaEnvios.length ? (e.removeClass("display-none"), l.addClass("display-none"), e = $("#table"), e.bootstrapTable("removeAll"), e.bootstrapTable("load", a.ListaEnvios), export_fileName = "Notificaciones", $("#regPagina").innerText = "Notificaciones por p\u00e1gina") : (l.removeClass("display-none"), e.addClass("display-none")); $("#overlay").hide()
                }, error: function (a) {
                    $("#overlay").hide(); toastr.error("Error en la llamada al servicio '" +
                        c + "'")
                }
            })
        } setTimeout(cargarSelectAdministracionPublica, 500); setTimeout(cargarSelectAsuntos, 500); setTimeout(cargarSelectGrupos, 500); g(); f(); $("#btn-buscar").click(function (b) {
            b.preventDefault(); "" == $inputIdentificador.val() && "" == $selectAdministracionPublica.val() && "" == $selectOrganismosRaiz.val() && "" == $selectOrganismosEmisores.val() && "" == $selectAsuntos.val() && "" == $selectGrupos.val() && "" == $fechaDesde.val() && "" == $fechaHasta.val() ? setTimeout(g, 1) : (b = {
                idEstados: JSON.stringify(k()), identificador: "" == $inputIdentificador.val() ?
                    null : $inputIdentificador.val(), administracionPublica: "" == $selectAdministracionPublica.val() ? null : $selectAdministracionPublica.val(), organismoRaiz: "" == $selectOrganismosRaiz.val() ? null : $selectOrganismosRaiz.val(), idOrganoEmisor: "" == $selectOrganismosEmisores.val() ? null : $selectOrganismosEmisores.val(), asunto: "" == $selectAsuntos.val() ? null : $selectAsuntos.val(), idGrupo: "" == $selectGrupos.val() ? null : $selectGrupos.val(), fechaDesde: "" == $fechaDesde.val() ? null : $fechaDesde.val(), fechaHasta: "" == $fechaHasta.val() ?
                        null : $fechaHasta.val()
            }, setTimeout(g, 1, b)); $("#overlay").show()
        }); $("#btn-limpiar").click(function (b) { $("#inputIdentificador")[0].value = ""; $("#selectAdministracionPublica").selectpicker("val", ""); cargarSelectOrganismoRaiz(""); cargarSelectOrganismosEmisores(""); $("#selectAsuntos").selectpicker("val", ""); $("#selectGrupos").selectpicker("val", ""); $("#fechaDesde")[0].value = ""; $("#fechaHasta")[0].value = "" }); $("#table").on("dbl-click-cell.bs.table", function (b, c, d, a) {
            window.location.href = a.EstadosEnvio.ID !=
                Estados.Comparecidas ? "../Notificaciones/NotificacionDetalle?identificador=" + a.Identificador + "&c=0" : "../Notificaciones/NotificacionComparecida?identificador=" + a.Identificador
        }); $("#btn-agregar-grupo").click(function (b) {
            b = $("#selectGruposModal").val(); if ("" != b) {
                for (var c = 1, d = document.querySelectorAll("#gruposAsignados li"), a = 0; li = d[a]; a++)li.id == b && (c = 0); 1 == c && $.ajax({
                    async: !1, type: "GET", contentType: "application/json; charset=utf-8", url: "/Base/GetGrupoById", data: { idGrupo: b }, dataType: "json", success: function (e) {
                        $("#gruposAsignados").append("<li id='" +
                            e.ID + "'><strong class='eliminar-grupo' title='Quitar' onclick=\"javascript:eliminarGrupoAsignado('" + e.ID + "')\">X</strong>" + e.Nombre + "</li>")
                    }, error: function (e) { toastr.error("Error en la llamada al servicio 'GetGrupoById'") }
                })
            }
        }); $("#btn-guardar-grupos").click(function (b) { b.preventDefault(); $("#asignarGrupoModal").modal("hide"); setTimeout(h, 1); $("#overlay").show() })
    })
});