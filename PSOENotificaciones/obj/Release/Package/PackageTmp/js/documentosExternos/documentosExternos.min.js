$(function () {
    function k() { var a = $("#selectTipoDocumento"); $.ajax({ async: !1, type: "GET", contentType: "application/json; charset=utf-8", url: "/DocumentosExternos/InsertDocumentoExterno", data: { identificador: identificador, typeMime: f, nombre: g, descripcion: $("#textDescripcionArchivo")[0].value, tipo: a.val() }, dataType: "json", success: function (b) { b.hasOwnProperty("responseText") ? toastr.error("Error en la llamada al servicio 'InsertDocumentoExterno'") : toastr.success("Archivo subido correctamente") }, error: function (b) { toastr.error("Error en la llamada al servicio 'InsertDocumentoExterno'") } }) }
    function h() {
        $.ajax({
            async: !1, type: "GET", contentType: "application/json; charset=utf-8", url: "/DocumentosExternos/GetDocumentosExternos", data: { identificador: identificador }, dataType: "json", success: function (a) {
                if (a.hasOwnProperty("responseText")) toastr.error("Error en la llamada al servicio 'GetDocumentosExternos'"); else if ($("#contenedor-principal")[0].innerHTML = "", $("#contenedor-acuse")[0].innerHTML = "", $("#contenedor-anexos")[0].innerHTML = "", $("#contenedor-otros")[0].innerHTML = "", null != a && 0 < a.length) for (var b =
                    0; b < a.length; b++) {
                        var c = a[b], d = b; if (null != c.Documento) {
                            var e = c.TypeMime; e = "application/pdf" == e ? "doc_doc_up" : "application/zip" == e ? "doc_zip" : "text/html" == e ? "doc_file" : "doc_doc_up"; d = "<li><a id='linkDocAnexoRef-" + d + "' class='doc-link doc-ext-ref' onclick='javascript:abrirAnexo(this);' href='' title='Ver documento' code='data:" + c.TypeMime + ";base64," + encodeURI(c.Documento) + "'><span class='document " + e + "'></span>" + c.Nombre + "</a></li>"; c.TiposDocumentosExternos_ID == TipoDocumentoExterno.Principal && ($("#contenedor-principal")[0].innerHTML =
                                $("#contenedor-principal")[0].innerHTML + d); c.TiposDocumentosExternos_ID == TipoDocumentoExterno.Anexo && ($("#contenedor-acuse")[0].innerHTML = $("#contenedor-acuse")[0].innerHTML + d); c.TiposDocumentosExternos_ID == TipoDocumentoExterno.Acuse && ($("#contenedor-anexos")[0].innerHTML = $("#contenedor-anexos")[0].innerHTML + d); c.TiposDocumentosExternos_ID == TipoDocumentoExterno.Otros && ($("#contenedor-otros")[0].innerHTML = $("#contenedor-otros")[0].innerHTML + d)
                        }
                }
            }, error: function (a) { toastr.error("Error en la llamada al servicio 'GetDocumentosExternos'") }
        })
    }
    var f, g; $(document).ready(function () { h() }); $(".btnSubirDoc").click(function (a) {
        a.preventDefault(); a = new FormData; var b = $("#fileDoc").get(0).files, c = $("#selectTipoDocumento").val(); 0 < b.length ? "Seleccionar" != c ? ($("#subirDocModal").modal("hide"), $("#overlay").show(), a.append("UploadedFile", b[0]), f = b[0].type, $.ajax({ type: "POST", url: "/DocumentosExternos/UploadFile", contentType: !1, processData: !1, data: a, success: function (d) { k(); h(); $("#overlay").hide() } })) : toastr.warning("Seleccione el tipo de archivo") :
            toastr.warning("Seleccione un archivo")
    }); $("body").on("change", "#fileDoc", function () { g = $("#fileDoc").get(0).files[0].name; $(".nombreArchivo")[0].innerText = $("#fileDoc").get(0).files[0].name; $(".upload-ok").show() })
});