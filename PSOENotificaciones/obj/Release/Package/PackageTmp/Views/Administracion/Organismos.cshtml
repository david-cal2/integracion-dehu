@{
    ViewBag.Title = "Organismos";
}

<div class="gn-body">
    <div class="gn-body-wrapper">
        <div class="body-aside">
            <div class="aside-wrapper">
                <aside class="aside">
                    <nav class="main-nav">
                        <ul>
                            <li>
                                <a href="~/Administracion/Usuarios">
                                    <span class="nav_item nav_item__user"></span>
                                    <span class="nav_text">Usuarios</span>
                                </a>
                            </li>
                            <li>
                                <a href="~/Administracion/Grupos">
                                    <span class="nav_item nav_item__groups"></span>
                                    <span class="nav_text">Grupos</span>
                                </a>
                            </li>
                            <li>
                                <a href="~/Administracion/Perfiles">
                                    <span class="nav_item nav_item__profile"></span>
                                    <span class="nav_text">Perfiles</span>
                                </a>
                            </li>
                            <li>
                                <a href="~/Administracion/Organismos" class="active_menu">
                                    <span class="nav_item nav_item__organisms"></span>
                                    <span class="nav_text">Organismos</span>
                                </a>
                            </li>
                        </ul>
                    </nav>
                </aside>
            </div>
        </div>
        <div class="body-main">
            <div class="main-section">
                <div class="container-fluid mt-3 px-2">
                    <ul class="breadcrumbs">
                        <li><a href="">Administración</a></li>
                        <li><a href="">Organismos</a></li>
                    </ul>
                    <div class="content_title d-flex justify-content-between">
                        <h1 class="title_menu">Organismos</h1>
                    </div>
                    <div class="accordion filters_container" id="toolbar">
                        <div class="accordion-item">
                            <div class="filters_container__wrapper row pt-2 mb-4 filtro-excel">
                                <div class="col-sm-12 d-flex justify-content-end">
                                    <button class="accordion-button d-inline" type="button"
                                            data-bs-toggle="collapse" data-bs-target="#collapseOne"
                                            aria-expanded="false" aria-controls="collapseOne">
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="collapseOne" class="accordion-collapse collapse"
                         aria-labelledby="headingOne" data-bs-parent="#accordionExample" style="margin: 15px;">
                        <div class="accordion-body pb-2">
                            <div class="row mb-3">
                                <div class="col-3">
                                    <div>
                                        <label for="input06A" class="form-label d-inline">Administración Pública</label>
                                        <div>
                                            <select class="selectpicker d-inline" 
                                                    id="selectAdministracionPublica" data-live-search="true" data-size="4"
                                                    onchange="setSelectAdministracionPublica()">
                                                <option aria-disabled="true" value="">
                                                    Seleccionar
                                                </option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-3">
                                    <div>
                                        <label for="input06A" class="form-label d-inline">Organismo Raíz</label>
                                        <div>
                                            <select class="selectpicker d-inline" 
                                                    id="selectOrganismosRaiz"
                                                    data-live-search="true" onchange="setSelectOrganismosRaiz()" data-size="4"
                                                    disabled="disabled">
                                                <option aria-disabled="true" value="">
                                                    Seleccionar
                                                </option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-3">
                                    <div>
                                        <label for="input06A" class="form-label d-inline">Organismo Emisor</label>
                                        <div>
                                            <select class="selectpicker d-inline" 
                                                    id="selectOrganismosEmisores"
                                                    data-live-search="true" data-size="4"
                                                    disabled="disabled">
                                                <option aria-disabled="true" value="">
                                                    Seleccionar
                                                </option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-3">
                                    <div>
                                        <label for="input06A" class="form-label d-inline">Provincia</label>
                                        <div>
                                            <select class="selectpicker d-inline" 
                                                    id="selectProvincias"
                                                    data-live-search="true" data-size="4">
                                                <option aria-disabled="true" value="">
                                                    Seleccionar
                                                </option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row mb-3">
                                <div class="col-3">
                                    <div>
                                        <label for="input06A" class="form-label d-inline">Comunidad Autónoma</label>
                                        <div>
                                            <select class="selectpicker d-inline" 
                                                    id="selectCCAA"
                                                    data-live-search="true" data-size="4">
                                                <option aria-disabled="true" value="">
                                                    Seleccionar
                                                </option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row mt-4">
                                <div class="col">
                                    <button id="btn-buscar" class="btn-primary me-2">Buscar</button>
                                    <button id="btn-limpiar" class="btn-secondary">Limpiar</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="table_container">
                        <div class="table_container__wrapper">
                            <table id="table"
                                   data-toggle="table"
                                   data-toolbar="#toolbar"
                                   data-search="true"
                                   data-pagination="true"
                                   data-escape="false"
                                   data-show-export="true"
                                   data-export-types="['excel']"
                                   data-export-data-type="all"
                                   data-show-jump-to="true"
                                   class="fixed_headers"
                                   data-url="../json/organismos.json">
                                <thead>
                                    <tr>
                                        <th data-field="AdministracionPublica" data-sortable="true">Administración Pública</th>
                                        <th data-field="Dir3OrganismoRaiz" data-sortable="true">DIR3 Organismo Raíz</th>
                                        <th data-field="OrganismoRaiz" data-sortable="true">Organismo Raíz</th>
                                        <th data-field="Dir3OrganismoEmisor" data-sortable="true">DIR3 Organismo Emisor</th>
                                        <th data-field="OrganismoEmisor" data-sortable="true">Organismo Emisor</th>
                                        <th data-field="Provincias.Provincia" data-sortable="true">Provincia</th>
                                        <th data-field="ComunidadesAutonomas.ComunidadAutonoma" data-sortable="true">Comunidad</th>
                                        <th data-field="CodigoHtmlGruposAsignadosCadena">Grupos</th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="overlay">
    <div class="cv-spinner">
        <span class="spinner"></span>
    </div>
</div>

<script>
    var idPerfil = '@ViewBag.IdPerfil';
</script>
<style>
    #table thead tr th:last-child div {
        float: left;
    }
</style>
<script src="~/js/shared/layout.min.js"></script>
<script src="~/js/administracion/organismos.min.js"></script>